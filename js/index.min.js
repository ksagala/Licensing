function updateFlag(e,t){t?(e.src="/media/flagged.svg",e.title="Remove flag"):(e.src="/media/unflagged.svg",e.title="Flag this diagram")}function flagClick(e){const t=e.target,a=t.parentElement.getElementsByClassName("link-text").item(0),n=a.pathname.substring(1,a.pathname.length-4),l=PageData.Flags.indexOf(n);-1===l?(PageData.Flags.push(n),updateFlag(t,!0)):(PageData.Flags.splice(l,1),updateFlag(t,!1)),localStorage.setItem(Common.StoreName.Flags,JSON.stringify(PageData.Flags))}function flagAllClick(e){e.preventDefault(),PageData.Flags=[];const t=document.getElementsByClassName("link-text");for(let e=0;e<t.length;e+=1){const a=t[e],n=a.pathname.substring(1,a.pathname.length-4);PageData.Flags.push(n);const l=a.parentElement.getElementsByClassName("link-flag").item(0);updateFlag(l,!0)}const a=JSON.stringify(PageData.Flags);localStorage.setItem(Common.StoreName.Flags,a)}function clearFlagsClick(e){e.preventDefault(),PageData.Flags=[];const t=JSON.stringify(PageData.Flags);localStorage.setItem(Common.StoreName.Flags,t);const a=document.getElementsByClassName("link-text");for(let e=0;e<a.length;e+=1){const t=a[e],n=t.parentElement.getElementsByClassName("link-flag").item(0);updateFlag(n,!1)}}function showFlags(){const e=localStorage.getItem(Common.StoreName.Flags);e&&(PageData.Flags=JSON.parse(e));const t=document.getElementsByClassName("link-text");for(let e=0;e<t.length;e+=1){const a=t[e],n=a.parentElement.getElementsByClassName("link-flag").item(0);n.addEventListener("click",flagClick);const l=a.pathname.substring(1,a.pathname.length-4),s=-1!==PageData.Flags.indexOf(l);updateFlag(n,s)}document.getElementById("clearAll").addEventListener("click",clearFlagsClick),document.getElementById("flagAll").addEventListener("click",flagAllClick)}function appOffline(){document.getElementById("offline").style.display="block"}function appOnline(){document.getElementById("offline").style.display="none"}function pageLoad(){showFlags(),Common.isIE&&Common.fixToMaxItemWidth("link-header",8,!1),document.getElementById("iewarning").style.display=Common.isIE?"block":"none",document.getElementById("offline").style.display=navigator.onLine?"none":"block",window.addEventListener("offline",appOffline),window.addEventListener("online",appOnline)}const PageData={Flags:[]};window.addEventListener("load",pageLoad);